import{i as Ce,e as W,c as q,n as x,t as Z,u as D,a as y,I,w as H,b as Se,d as Ie,f as ke,m as k,g as Be,h as Te,j as Ee}from"./index.a28260a7.js";import{i as Pe,e as Ve,f as S,g as C,h as O,j as R,k as o,l as Fe,p as Le,w as Me,m as p,q as M,s as $e,t as ee,o as De,u as Oe,v as B,x as Re,y as ze,z as Ae,A as Ne,B as je}from"./vendor.ead797d1.js";import{_ as We}from"./index.36f4b898.js";var qe=typeof window!="undefined";function He(e){const t=Pe(e,null);if(t){const a=O(),{link:c,unlink:i,internalChildren:u}=t;c(a),Ve(()=>i(a));const h=S(()=>u.indexOf(a));return{parent:t,index:h}}return{parent:null,index:C(-1)}}var $,N;function Ue(){if(!$&&($=C(0),N=C(0),qe)){const e=()=>{$.value=window.innerWidth,N.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:$,height:N}}var Ke=Symbol("van-field");function J(e,t){"scrollTop"in e?e.scrollTop=t:e.scrollTo(e.scrollX,t)}function ne(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function te(e){J(window,e),J(document.body,e)}const Ye=Ce();function Je(){Ye&&te(ne())}const Xe=e=>e.stopPropagation();function X(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault(),t&&Xe(e)}Ue();const Ge=Symbol("van-form");function Qe(e){const t=O();t&&W(t.proxy,e)}const Ze={to:[String,Object],url:String,replace:Boolean};function pe({to:e,url:t,replace:a,$router:c}){e&&c?c[a?"replace":"push"](e):t&&(a?location.replace(t):location.href=t)}function en(){const e=O().proxy;return()=>pe(e)}const[nn,w]=q("cell"),ae={icon:String,size:String,title:x,value:x,label:x,center:Boolean,isLink:Boolean,border:Z,required:Boolean,iconPrefix:String,valueClass:D,labelClass:D,titleClass:D,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},tn=W({},ae,Ze);var an=R({name:nn,props:tn,setup(e,{slots:t}){const a=en(),c=()=>{if(t.label||y(e.label))return o("div",{class:[w("label"),e.labelClass]},[t.label?t.label():e.label])},i=()=>{if(t.title||y(e.title))return o("div",{class:[w("title"),e.titleClass],style:e.titleStyle},[t.title?t.title():o("span",null,[e.title]),c()])},u=()=>{const s=t.value||t.default;if(s||y(e.value)){const v=t.title||y(e.title);return o("div",{class:[w("value",{alone:!v}),e.valueClass]},[s?s():o("span",null,[e.value])])}},h=()=>{if(t.icon)return t.icon();if(e.icon)return o(I,{name:e.icon,class:w("left-icon"),classPrefix:e.iconPrefix},null)},f=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const s=e.arrowDirection?`arrow-${e.arrowDirection}`:"arrow";return o(I,{name:s,class:w("right-icon")},null)}};return()=>{var s,d;const{size:v,center:T,border:z,isLink:_,required:E}=e,b=(s=e.clickable)!=null?s:_,P={center:T,required:E,clickable:b,borderless:!z};return v&&(P[v]=!!v),o("div",{class:w(P),role:b?"button":void 0,tabindex:b?0:void 0,onClick:a},[h(),i(),u(),f(),(d=t.extra)==null?void 0:d.call(t)])}}});const ie=H(an);function ln(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function on(e,t){return!(t.required&&ln(e)||t.pattern&&!t.pattern.test(String(e)))}function rn(e,t){return new Promise(a=>{const c=t.validator(e,t);if(Se(c)){c.then(a);return}a(c)})}function G(e,t){const{message:a}=t;return Ie(a)?a(e,t):a||""}function cn({target:e}){e.composing=!0}function Q({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function sn(e,t){const a=ne();e.style.height="auto";let c=e.scrollHeight;if(ke(t)){const{maxHeight:i,minHeight:u}=t;i!==void 0&&(c=Math.min(c,i)),u!==void 0&&(c=Math.max(c,u))}c&&(e.style.height=`${c}px`,te(a))}function un(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function j(e){return[...e].length}function dn(e,t){return[...e].slice(0,t).join("")}let fn=0;function gn(){const e=O(),{name:t="unknown"}=(e==null?void 0:e.type)||{};return`${t}-${++fn}`}const[mn,m]=q("field"),hn={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:x,formatter:Function,clearIcon:k("clear"),modelValue:Be(""),inputAlign:String,placeholder:String,autocomplete:String,errorMessage:String,clearTrigger:k("focus"),formatTrigger:k("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},vn=W({},ae,hn,{rows:x,type:k("text"),rules:Array,autosize:[Boolean,Object],labelWidth:x,labelClass:D,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var bn=R({name:mn,props:vn,emits:["blur","focus","clear","keypress","click-input","click-left-icon","click-right-icon","update:modelValue"],setup(e,{emit:t,slots:a}){const c=gn(),i=Fe({focused:!1,validateFailed:!1,validateMessage:""}),u=C(),h=C(),{parent:f}=He(Ge),s=()=>{var n;return String((n=e.modelValue)!=null?n:"")},d=n=>{if(y(e[n]))return e[n];if(f&&y(f.props[n]))return f.props[n]},v=S(()=>{const n=d("readonly");if(e.clearable&&!n){const l=s()!=="",r=e.clearTrigger==="always"||e.clearTrigger==="focus"&&i.focused;return l&&r}return!1}),T=S(()=>h.value&&a.input?h.value():e.modelValue),z=n=>n.reduce((l,r)=>l.then(()=>{if(i.validateFailed)return;let{value:g}=T;if(r.formatter&&(g=r.formatter(g,r)),!on(g,r)){i.validateFailed=!0,i.validateMessage=G(g,r);return}if(r.validator)return rn(g,r).then(L=>{L&&typeof L=="string"?(i.validateFailed=!0,i.validateMessage=L):L===!1&&(i.validateFailed=!0,i.validateMessage=G(g,r))})}),Promise.resolve()),_=()=>{i.validateFailed&&(i.validateFailed=!1,i.validateMessage="")},E=(n=e.rules)=>new Promise(l=>{_(),n?z(n).then(()=>{i.validateFailed?l({name:e.name,message:i.validateMessage}):l()}):l()}),b=n=>{if(f&&e.rules){const l=f.props.validateTrigger===n,r=e.rules.filter(g=>g.trigger?g.trigger===n:l);r.length&&E(r)}},P=n=>{const{maxlength:l}=e;if(y(l)&&j(n)>l){const r=s();return r&&j(r)===+l?r:dn(n,+l)}return n},V=(n,l="onChange")=>{if(n=P(n),e.type==="number"||e.type==="digit"){const r=e.type==="number";n=Ee(n,r,r)}e.formatter&&l===e.formatTrigger&&(n=e.formatter(n)),u.value&&u.value.value!==n&&(u.value.value=n),n!==e.modelValue&&t("update:modelValue",n)},oe=n=>{n.target.composing||V(n.target.value)},A=()=>{var n;return(n=u.value)==null?void 0:n.blur()},re=()=>{var n;return(n=u.value)==null?void 0:n.focus()},F=()=>{const n=u.value;e.type==="textarea"&&e.autosize&&n&&sn(n,e.autosize)},ce=n=>{i.focused=!0,t("focus",n),M(F),d("readonly")&&A()},se=n=>{d("readonly")||(i.focused=!1,V(s(),"onBlur"),t("blur",n),b("onBlur"),M(F),Je())},U=n=>t("click-input",n),ue=n=>t("click-left-icon",n),de=n=>t("click-right-icon",n),fe=n=>{X(n),t("update:modelValue",""),t("clear",n)},K=S(()=>{if(typeof e.error=="boolean")return e.error;if(f&&f.props.showError&&i.validateFailed)return!0}),ge=S(()=>{const n=d("labelWidth");if(n)return{width:Te(n)}}),me=n=>{n.keyCode===13&&(!(f&&f.props.submitOnEnter)&&e.type!=="textarea"&&X(n),e.type==="search"&&A()),t("keypress",n)},Y=()=>e.id||`${c}-input`,he=()=>{const n=m("control",[d("inputAlign"),{error:K.value,custom:!!a.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(a.input)return o("div",{class:n,onClick:U},[a.input()]);const l={id:Y(),ref:u,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:n,value:e.modelValue,disabled:d("disabled"),readonly:d("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,"aria-labelledby":e.label?`${c}-label`:void 0,onBlur:se,onFocus:ce,onInput:oe,onClick:U,onChange:Q,onKeypress:me,onCompositionend:Q,onCompositionstart:cn};return e.type==="textarea"?o("textarea",l,null):o("input",$e(un(e.type),l),null)},ve=()=>{const n=a["left-icon"];if(e.leftIcon||n)return o("div",{class:m("left-icon"),onClick:ue},[n?n():o(I,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},be=()=>{const n=a["right-icon"];if(e.rightIcon||n)return o("div",{class:m("right-icon"),onClick:de},[n?n():o(I,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},ye=()=>{if(e.showWordLimit&&e.maxlength){const n=j(s());return o("div",{class:m("word-limit")},[o("span",{class:m("word-num")},[n]),ee("/"),e.maxlength])}},_e=()=>{if(f&&f.props.showErrorMessage===!1)return;const n=e.errorMessage||i.validateMessage;if(n){const l=a["error-message"],r=d("errorMessageAlign");return o("div",{class:m("error-message",r)},[l?l({message:n}):n])}},we=()=>{const n=d("colon")?":":"";if(a.label)return[a.label(),n];if(e.label)return o("label",{id:`${c}-label`,for:Y()},[e.label+n])},xe=()=>[o("div",{class:m("body")},[he(),v.value&&o(I,{name:e.clearIcon,class:m("clear"),onTouchstart:fe},null),be(),a.button&&o("div",{class:m("button")},[a.button()])]),ye(),_e()];return Qe({blur:A,focus:re,validate:E,formValue:T,resetValidation:_}),Le(Ke,{customValue:h,resetValidation:_,validateWithTrigger:b}),Me(()=>e.modelValue,()=>{V(s()),_(),b("onChange"),M(F)}),p(()=>{V(s(),e.formatTrigger),M(F)}),()=>{const n=d("disabled"),l=d("labelAlign"),r=we(),g=ve();return o(ie,{size:e.size,icon:e.leftIcon,class:m({error:K.value,disabled:n,[`label-${l}`]:l}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:ge.value,valueClass:m("value"),titleClass:[m("label",[l,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:g?()=>g:null,title:r?()=>r:null,value:xe,extra:a.extra})}}});const yn=H(bn),[_n,wn]=q("divider"),xn={dashed:Boolean,hairline:Z,contentPosition:k("center")};var Cn=R({name:_n,props:xn,setup(e,{slots:t}){return()=>{var a;return o("div",{role:"separator",class:wn({dashed:e.dashed,hairline:e.hairline,[`content-${e.contentPosition}`]:!!t.default})},[(a=t.default)==null?void 0:a.call(t)])}}});const Sn=H(Cn);const le=e=>(Ae("data-v-94891eba"),e=e(),Ne(),e),In={class:"page-container"},kn=le(()=>B("header",{class:"header"},[B("h1",null,"Header")],-1)),Bn={class:"body"},Tn=ee("\u70B9\u51FB\u8F93\u5165\u6846\u6D4B\u8BD5\u7C98\u6027\u5E03\u5C40"),En=le(()=>B("footer",{class:"footer"},[B("h1",null,"Footer")],-1)),Pn=R({setup(e){const t=C(""),a=je(),c=()=>{a.push("/detail")};return p(()=>{window.addEventListener("resize",()=>{const i=document.body||document.documentElement;console.log(i.clientHeight)})}),(i,u)=>{const h=Sn,f=yn,s=ie;return De(),Oe("section",In,[kn,B("section",Bn,[o(h,{style:ze({color:"var(--van-blue)",borderColor:"var(--van-blue)"})},{default:Re(()=>[Tn]),_:1},8,["style"]),o(f,{id:"sb",modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=d=>t.value=d),label:"\u6587\u672C",placeholder:"\u8BF7\u8F93\u5165\u4E00\u4E9B\u5185\u5BB9"},null,8,["modelValue"]),o(s,{title:"\u8DF3\u8F6C","is-link":"",onClick:c})]),En])}}});var Mn=We(Pn,[["__scopeId","data-v-94891eba"]]);export{Mn as default};
